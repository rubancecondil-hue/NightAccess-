<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NightAccess | Secure Login</title>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: moveBackground 20s linear infinite;
    }

    @keyframes moveBackground {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }

    .container {
      background: rgba(20, 20, 30, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
      width: 100%;
      max-width: 420px;
      padding: 40px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(102, 126, 234, 0.2);
      position: relative;
      z-index: 1;
    }

    .logo {
      text-align: center;
      margin-bottom: 30px;
    }

    .logo h1 {
      color: #a8b2ff;
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 5px;
      text-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
      letter-spacing: 2px;
    }

    .logo p {
      color: #8b95c9;
      font-size: 14px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      background: rgba(30, 30, 45, 0.5);
      border-radius: 10px;
      padding: 5px;
      border: 1px solid rgba(102, 126, 234, 0.1);
    }

    .tab {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      color: #8b95c9;
      transition: all 0.3s;
    }

    .tab.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .form-group {
      margin-bottom: 20px;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #a8b2ff;
      font-weight: 500;
      font-size: 14px;
    }

    .input-wrapper {
      position: relative;
    }

    .form-group input {
      width: 100%;
      padding: 14px 45px 14px 15px;
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s;
      outline: none;
      background: rgba(30, 30, 45, 0.5);
      color: #e0e0e0;
    }

    .form-group input::placeholder {
      color: #6b7280;
    }

    .form-group input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
      background: rgba(30, 30, 45, 0.7);
    }

    .toggle-password {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      color: #8b95c9;
      font-size: 18px;
      padding: 5px;
      transition: color 0.3s;
    }

    .toggle-password:hover {
      color: #a8b2ff;
    }

    .password-strength {
      height: 4px;
      background: rgba(102, 126, 234, 0.1);
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }

    .password-strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.3s;
      border-radius: 2px;
    }

    .strength-weak { background: #ff4444; width: 33%; }
    .strength-medium { background: #ffbb33; width: 66%; }
    .strength-strong { background: #00C851; width: 100%; }

    .password-hint {
      font-size: 12px;
      color: #8b95c9;
      margin-top: 5px;
    }

    .submit-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .spinner {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .alert {
      padding: 12px 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      display: none;
      animation: slideIn 0.3s;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .alert.success {
      background: rgba(0, 200, 81, 0.2);
      color: #4ade80;
      border: 1px solid rgba(0, 200, 81, 0.3);
    }

    .alert.error {
      background: rgba(255, 68, 68, 0.2);
      color: #ff6b6b;
      border: 1px solid rgba(255, 68, 68, 0.3);
    }

    .divider {
      text-align: center;
      margin: 25px 0;
      position: relative;
    }

    .divider::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      width: 100%;
      height: 1px;
      background: rgba(102, 126, 234, 0.2);
    }

    .divider span {
      background: rgba(20, 20, 30, 0.95);
      padding: 0 15px;
      color: #8b95c9;
      font-size: 14px;
      position: relative;
    }

    .google-btn {
      width: 100%;
      padding: 12px;
      background: rgba(30, 30, 45, 0.5);
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: 10px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 500;
      color: #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s;
    }

    .google-btn:hover {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.1);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
    }

    .forgot-password {
      text-align: right;
      margin-top: -10px;
      margin-bottom: 20px;
    }

    .forgot-password a {
      color: #667eea;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
    }

    .forgot-password a:hover {
      text-decoration: underline;
    }

    @media (max-width: 480px) {
      .container {
        padding: 30px 20px;
      }
      
      .logo h1 {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <div class="logo">
    <h1>üåô NightAccess</h1>
    <p>Secure Authentication System</p>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="switchTab('login')">Login</button>
    <button class="tab" onclick="switchTab('signup')">Sign Up</button>
  </div>

  <div id="alertBox" class="alert"></div>

  <div id="loginForm">
    <div class="form-group">
      <label for="loginEmail">Email Address</label>
      <input type="email" id="loginEmail" placeholder="Enter your email" autocomplete="email">
    </div>

    <div class="form-group">
      <label for="loginPassword">Password</label>
      <div class="input-wrapper">
        <input type="password" id="loginPassword" placeholder="Enter your password" autocomplete="current-password">
        <button type="button" class="toggle-password" onclick="togglePassword('loginPassword')">üëÅÔ∏è</button>
      </div>
    </div>

    <div class="forgot-password">
      <a href="#" onclick="resetPassword(); return false;">Forgot Password?</a>
    </div>

    <button class="submit-btn" onclick="handleLogin()">
      <span id="loginBtnText">Login to Account</span>
      <div class="spinner" id="loginSpinner"></div>
    </button>

    <div class="divider"><span>OR</span></div>

    <button class="google-btn" onclick="googleSignIn()">
      <svg width="20" height="20" viewBox="0 0 20 20">
        <path fill="#4285F4" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z"/>
        <path fill="#34A853" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z"/>
        <path fill="#FBBC05" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z"/>
        <path fill="#EA4335" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z"/>
      </svg>
      Continue with Google
    </button>
  </div>

  <div id="signupForm" style="display: none;">
    <div class="form-group">
      <label for="signupEmail">Email Address</label>
      <input type="email" id="signupEmail" placeholder="Enter your email" autocomplete="email">
    </div>

    <div class="form-group">
      <label for="signupPassword">Password</label>
      <div class="input-wrapper">
        <input type="password" id="signupPassword" placeholder="Create a strong password" autocomplete="new-password" oninput="checkPasswordStrength()">
        <button type="button" class="toggle-password" onclick="togglePassword('signupPassword')">üëÅÔ∏è</button>
      </div>
      <div class="password-strength">
        <div class="password-strength-bar" id="strengthBar"></div>
      </div>
      <div class="password-hint" id="passwordHint">Use 8+ characters with mix of letters, numbers & symbols</div>
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <div class="input-wrapper">
        <input type="password" id="confirmPassword" placeholder="Re-enter your password" autocomplete="new-password">
        <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')">üëÅÔ∏è</button>
      </div>
    </div>

    <button class="submit-btn" onclick="handleSignup()">
      <span id="signupBtnText">Create Account</span>
      <div class="spinner" id="signupSpinner"></div>
    </button>

    <div class="divider"><span>OR</span></div>

    <button class="google-btn" onclick="googleSignIn()">
      <svg width="20" height="20" viewBox="0 0 20 20">
        <path fill="#4285F4" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z"/>
        <path fill="#34A853" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z"/>
        <path fill="#FBBC05" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z"/>
        <path fill="#EA4335" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z"/>
      </svg>
      Sign up with Google
    </button>
  </div>
</div>

<script>
  // Firebase Configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCo1c4PTw5vbDUqRZtTYgBsqSddPNUFKxc",
    authDomain: "nightaccess-login-d3b7e.firebaseapp.com",
    projectId: "nightaccess-login-d3b7e",
    storageBucket: "nightaccess-login-d3b7e.appspot.com",
    messagingSenderId: "505017305292",
    appId: "1:505017305292:web:a383cb8f1d6020575eda69"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Tab switching
  function switchTab(tab) {
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(t => t.classList.remove('active'));
    
    if (tab === 'login') {
      tabs[0].classList.add('active');
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    } else {
      tabs[1].classList.add('active');
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }
    hideAlert();
  }

  // Toggle password visibility
  function togglePassword(fieldId) {
    const field = document.getElementById(fieldId);
    const btn = field.nextElementSibling;
    
    if (field.type === 'password') {
      field.type = 'text';
      btn.textContent = 'üôà';
    } else {
      field.type = 'password';
      btn.textContent = 'üëÅÔ∏è';
    }
  }

  // Password strength checker
  function checkPasswordStrength() {
    const password = document.getElementById('signupPassword').value;
    const bar = document.getElementById('strengthBar');
    const hint = document.getElementById('passwordHint');
    
    let strength = 0;
    if (password.length >= 8) strength++;
    if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
    if (password.match(/[0-9]/)) strength++;
    if (password.match(/[^a-zA-Z0-9]/)) strength++;
    
    bar.className = 'password-strength-bar';
    
    if (strength === 0 || strength === 1) {
      bar.classList.add('strength-weak');
      hint.textContent = 'Weak password - add more characters';
      hint.style.color = '#ff4444';
    } else if (strength === 2 || strength === 3) {
      bar.classList.add('strength-medium');
      hint.textContent = 'Medium strength - consider adding symbols';
      hint.style.color = '#ffbb33';
    } else {
      bar.classList.add('strength-strong');
      hint.textContent = 'Strong password!';
      hint.style.color = '#00C851';
    }
  }

  // Alert functions
  function showAlert(message, type) {
    const alertBox = document.getElementById('alertBox');
    alertBox.textContent = message;
    alertBox.className = `alert ${type}`;
    alertBox.style.display = 'block';
    
    if (type === 'success') {
      setTimeout(() => hideAlert(), 3000);
    }
  }

  function hideAlert() {
    document.getElementById('alertBox').style.display = 'none';
  }

  // Login function
  async function handleLogin() {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value;
    const btn = document.querySelector('#loginForm .submit-btn');
    const btnText = document.getElementById('loginBtnText');
    const spinner = document.getElementById('loginSpinner');

    if (!email || !password) {
      showAlert('Please fill in all fields', 'error');
      return;
    }

    btn.disabled = true;
    btnText.style.display = 'none';
    spinner.style.display = 'block';

    try {
      await auth.signInWithEmailAndPassword(email, password);
      showAlert('Login successful! Redirecting...', 'success');
      setTimeout(() => {
        window.location.href = 'dashboard.html';
      }, 1500);
    } catch (error) {
      let errorMessage = 'Login failed. Please try again.';
      
      if (error.code === 'auth/user-not-found') {
        errorMessage = 'No account found with this email';
      } else if (error.code === 'auth/wrong-password') {
        errorMessage = 'Incorrect password';
      } else if (error.code === 'auth/invalid-email') {
        errorMessage = 'Invalid email address';
      } else if (error.code === 'auth/too-many-requests') {
        errorMessage = 'Too many attempts. Please try later';
      }
      
      showAlert(errorMessage, 'error');
      btn.disabled = false;
      btnText.style.display = 'inline';
      spinner.style.display = 'none';
    }
  }

  // Signup function
  async function handleSignup() {
    const email = document.getElementById('signupEmail').value.trim();
    const password = document.getElementById('signupPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const btn = document.querySelector('#signupForm .submit-btn');
    const btnText = document.getElementById('signupBtnText');
    const spinner = document.getElementById('signupSpinner');

    if (!email || !password || !confirmPassword) {
      showAlert('Please fill in all fields', 'error');
      return;
    }

    if (password !== confirmPassword) {
      showAlert('Passwords do not match', 'error');
      return;
    }

    if (password.length < 8) {
      showAlert('Password must be at least 8 characters', 'error');
      return;
    }

    btn.disabled = true;
    btnText.style.display = 'none';
    spinner.style.display = 'block';

    try {
      await auth.createUserWithEmailAndPassword(email, password);
      showAlert('Account created successfully! Redirecting...', 'success');
      setTimeout(() => {
        window.location.href = 'dashboard.html';
      }, 1500);
    } catch (error) {
      let errorMessage = 'Signup failed. Please try again.';
      
      if (error.code === 'auth/email-already-in-use') {
        errorMessage = 'Email already registered. Try logging in.';
      } else if (error.code === 'auth/invalid-email') {
        errorMessage = 'Invalid email address';
      } else if (error.code === 'auth/weak-password') {
        errorMessage = 'Password is too weak';
      }
      
      showAlert(errorMessage, 'error');
      btn.disabled = false;
      btnText.style.display = 'inline';
      spinner.style.display = 'none';
    }
  }

  // Google Sign In
  async function googleSignIn() {
    const provider = new firebase.auth.GoogleAuthProvider();
    
    try {
      await auth.signInWithPopup(provider);
      showAlert('Signed in with Google! Redirecting...', 'success');
      setTimeout(() => {
        window.location.href = 'dashboard.html';
      }, 1500);
    } catch (error) {
      showAlert('Google sign-in failed: ' + error.message, 'error');
    }
  }

  // Password reset
  async function resetPassword() {
    const email = document.getElementById('loginEmail').value.trim();
    
    if (!email) {
      showAlert('Please enter your email address first', 'error');
      return;
    }

    try {
      await auth.sendPasswordResetEmail(email);
      showAlert('Password reset email sent! Check your inbox.', 'success');
    } catch (error) {
      showAlert('Failed to send reset email: ' + error.message, 'error');
    }
  }

  // Auto redirect if already logged in
  auth.onAuthStateChanged(user => {
    if (user) {
      window.location.href = 'dashboard.html';
    }
  });

  // Enter key support
  document.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      const loginForm = document.getElementById('loginForm');
      const signupForm = document.getElementById('signupForm');
      
      if (loginForm.style.display !== 'none') {
        handleLogin();
      } else if (signupForm.style.display !== 'none') {
        handleSignup();
      }
    }
  });
</script>

</body>
</html>
